\subsubsection{树形背包优化}
\noindent
限制: 必须取与根节点相连的一个连通块.\\
转化: 一个点的子树对应于DFS序中的一个区间. 则每个点的决策为, 取该点, 或者舍弃该点对应的区间. 从后往前dp, 设$f(i, v)$表示从后往前考虑到i号点, 总体积为V的最优价值, 设i号点对应的区间为$[i,i+\mathrm{size}_i-1]$, 转移为$f(i, v)=\max\{f(i+1, V-v_i)+w_i, f(i+\mathrm{size}_i, v)\}$.\\
如果要求任意连通块, 则点分治后转为指定根的连通块问题即可.
